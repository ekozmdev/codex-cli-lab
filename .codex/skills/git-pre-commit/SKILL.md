---
name: git-pre-commit
description: --no-pager の status / diff を使ってコミット前に確認するためのスキル。ユーザーが「コミットして」「コミット作って」「コミット前に確認したい」と言ったときに使う。
---

# Git Pre Commit

## 概要

コミット前に no-pager の Git 確認を行い、ステージ済みと未ステージの差分を要約する。

## 手順

1. 下のコマンドを順番に実行する。
2. ステージ済み/未ステージの差分と気になる点を要約する。
3. ステージ済みが空なら、ステージするかコミットを見送るか確認する。
4. 変更が多すぎる場合は、具体例を示しながら分割コミットを提案する。

## コマンド（順番どおりに実行）

```sh
git --no-pager status --short --branch
git --no-pager diff
git --no-pager diff --staged
```

## 注意

- 出力は簡潔にし、意図した内容がコミットされるかに集中する。
- ユーザーの明示的な依頼がない限りコミットは実行しない。
- 変更が多いと判断したら、以下のような分割例を提示する。
  - 例1: `src/` の機能変更と `tests/` の追加を別コミットにする
  - 例2: リファクタと振る舞い変更を分ける
  - 例3: 依存関係更新と機能修正を分ける
- 分割コミットはファイル単位のステージを前提に提案する。
