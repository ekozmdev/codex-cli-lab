---
name: git-pre-commit
description: ユーザーが「コミットして」「コミット作って」「コミット前に確認したい」と言ったときに使う。gitの参照系サブコマンドを使って確認し、コミットするスキル。
---

# Git Pre Commit

## 概要

コミット前にブランチとステージ状態を確認し、未ステージの差分を見て分割の必要性を判断する。

## 手順

1. 現在のブランチを確認する。main の場合はそのままで良いかユーザーに確認する。

```sh
git --no-pager branch
```

2. `git status` でステージ済み/未ステージの有無を確認する。

```sh
git --no-pager status --short
```

3. ステージ済みがある場合はコミット忘れか確認し、必要なら差分を要約する（ステージ済みがある場合のみ実行）。

```sh
git --no-pager diff --staged
```

4. 未ステージの変更内容を確認し、変更が多い/複数機能なら具体例を挙げて分割コミットを提案する。

```sh
git --no-pager diff
```

5. 分割する場合は必要なファイルだけをステージしてコミットする（分割が OK の場合のみ）。

```sh
git add <file> [<file> ...]
git commit -m "prefix: 変更内容を簡潔に一文日本語で"
```

6. 分割しない場合、または残りをまとめてコミットする（OK の場合のみ）。

```sh
git add -A
git commit -m "prefix: 変更内容を簡潔に一文日本語で"
```
