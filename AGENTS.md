# AGENTS.md

クラウドベースのCodexからこの`AGENTS.md`を参照する想定。

## リポジトリ概要
OpenAI codex-cliに関する情報や個人の設定値を蓄積するリポジトリ。

## リポジトリ構成

```plain
codex-cli-lab
├── AGENTS.md           # この手順書
├── README.md           # 公開向け概要と最新バージョン
├── my-config/          # Codex CLI用設定（例: .codex/config.toml）この下のファイルは変更禁止
├── reports/            # 差分レポート置き場（空なら .gitkeep のみ）
└── update-config.sh    # ローカル設定更新用スクリプト
```

## レポート作成ワークフロー概要

- READMEや過去レポートから「最後に調べた正式バージョン」を確認する。
- codex公式リポジトリを一時ディレクトリにcloneしてタグを取得し、新しい正式バージョンの有無を判断する（プレリリースは除外）。
- 新しい正式バージョンがある場合のみ、タグ差分を調べてレポートを作成する。
- レポートに合わせて `README.md` のバージョン表示を更新する。
- 新しい正式バージョンが見つからない場合は何も変更せず終了する。
  - バージョンがないがないときに既存ファイルを更新しないこと。

## ステップ1: リリース確認（初期セットアップ）

- 追加の言語セットアップは不要。
- `README.md` と `reports/` を確認し、最後に調べた正式バージョンをメモする（以降はこのバージョンを基準に判断）。

## ステップ2: codexリポジトリcloneと最新バージョン確認

- 作業用の一時ディレクトリを用意し、`git clone https://github.com/openai/codex.git` を実行する。
- clone先で `git fetch --tags` を実行し、タグを最新化する。
- `git tag --sort=-v:refname` でタグ一覧を確認し、基準バージョンより新しい正式タグ（alpha/betaなどのプレリリースは除外、に `rust-` などの接頭辞が付いていても除外しx.y.z形式のバージョンとみなす。）が存在するか確認する。
- 新しい正式タグが見つからなければ、この時点で作業終了（以降の手順は実施しない）。見つかった場合のみステップ3へ進む。
- タグを見ても見つからなかった場合は、それ以上・他の方法でタグを探す必要はない。何もせずタスクを終了すること。

## ステップ3: レポート作成

### バージョン確認

- 最新正式タグと、直前の正式タグを特定する（プレリリースは除外）。
- githubのリリースノートで概要を確認する
- `git diff <前回調査したタグ> <最新タグ>` で差分を取得する。


### レポート記述

- 差分から新機能や新しい設定項目など、重要な変更点を抜粋してまとめる（バグ修正や細かい変更は記載不要）。
- 有益な差分がなければ「特筆事項なし」とする。
- `reports/yyyy-MM-dd-x-y-z.md` というMarkdownファイル（`yyyy-MM-dd` は取得したリリース日、`x-y-z` はバージョン）を新規作成し、レポートを保存する。既存レポートは上書きしない。


レポートテンプレート

```markdown
# codex

## 前回調査したバージョン

x.y.z (tag: rust-x.y.z)

## 今回調査したバージョン

a.b.c (tag: rust-a.b.c)

## 追加された機能・設定項目

## 廃止された(または廃止予定の)機能・設定項目

## その他

```

## ステップ4: READMEの更新
作成したレポートに合わせて `README.md` のバージョン情報を更新する。

例)

```
- 調査した最新バージョンは`x.y.z`です(yyyy/MM/ddリリース)
```

